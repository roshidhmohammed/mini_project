<%- include("../layouts/adminheader.ejs") %>

<div class="col-md-12">
    <div class="card">
        <div class="header justify-content-center">
            <h2 class="title" style="text-align: center;">Admin Coupon List</h2>
            <p class="category " style="text-align: center;">All Coupons list</p>
            <hr style="color:black;">
            <a href="/admin/admin-offer" class="btn btn-light ml-auto" style="background-color:black; font-weight: bold; color:white;">ADD COUPON</a>
        </div>
        <div class="d-flex align-items-center justify-content-between mb-4">
            <table width="100%" class="table" style="color: black; ">
                <tr style="font-weight: bolder;">
                    <th>Sl No</th>
                    <th>Coupon Name</th>
                    <th>Type</th>
                    <th>Discount</th>
                    <th>Actions</th>
                </tr>
                <br>
                <% if(coupon.length>0) {
                    for(let i=0;i<coupon.length;i++) { %>
                        <tr>
                            <td>
                                <%= i+1 %>
                            </td>
                            <td>
                                <%= coupon[i].name %>
                            </td>
                            <td>
                                <%= coupon[i].type %>
                            </td>
                            <td>
                                <%= coupon[i].discount %>
                            </td>
                            
                            <td>
                                <% if(coupon[i].isActive === 0){ %>
                                <button type="button" ><a href="/admin/show-coupon?id=<%= coupon[i]._id%>"
                                style="color:green; text-decoration: none;" class="btn btn-outline-success">Show</a></button>
                                <%} else { %>
                                <button type="button" ><a href="/admin/block-coupon?id=<%= coupon[i]._id%>"
                                style="color: red; text-decoration: none;" class=" delete btn btn-outline-success" >Hide</a></button>

                                <% } %>
                                
                               </td>
                        </tr>
                <% } } else { %>
                        <tr>
                            <td colspan="5">Coupons Not Found</td>
                        </tr>
                     <% } %>
                
            </table>
        </div>
    </div>
</div>

// <script>
//     $(".delete").on("click", function(e) {
//     e.preventDefault()
//     var self = $(this)
//     Swal.fire({
//   title: 'Are you sure?',
//   text: "You won't be able to revert this!",
//   icon: 'warning',
//   showCancelButton: true,
//   confirmButtonColor: '#3085d6',
//   cancelButtonColor: '#d33',
//   confirmButtonText: 'Yes, delete it!'
// }).then((result) => {
//   if (result.isConfirmed) {
//     Swal.fire(
//       // 'Deleted!',
//       // 'Your file has been deleted.',
//       // 'success'
//       location.href =self.attr('href')
//     )
//   }
// })
//     })
//   </script>